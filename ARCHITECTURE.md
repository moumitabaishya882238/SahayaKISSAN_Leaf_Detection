# Architecture & Integration Diagrams

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (React)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              LeafDisease Component                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ 1. Camera/Upload Image                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ 2. Fetch Live Sensor Data (every 10s)             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ 3. Send Image to Backend ML                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ 4. Calculate Severity (local function)            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ 5. Get Advisory (local function)                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ 6. Render Results with Recommendations            â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         New Utility: severityCalculator.js              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ calculateSeverity(diseaseLabel, sensorData)        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â†’ Returns: "LOW" | "MEDIUM" | "HIGH"               â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ getAdvisory(diseaseLabel, severity)                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â†’ Returns: { emoji, title, severity, actions[] }   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                        â”‚
                  â–¼                        â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ ML Prediction    â”‚    â”‚ Sensor Data      â”‚
         â”‚ (GET /api/leaf)  â”‚    â”‚ (GET /api-sensor)â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                        â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Backend (Node.js)     â”‚
                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                  â”‚  â”‚ /api/leaf       â”‚   â”‚
                  â”‚  â”‚  /predict       â”‚   â”‚
                  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                  â”‚  â”‚ /api-sensor     â”‚   â”‚
                  â”‚  â”‚  /sensor-data   â”‚   â”‚
                  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                  â”‚                        â”‚
                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                  â”‚  â”‚ Python          â”‚   â”‚
                  â”‚  â”‚ predict.py      â”‚   â”‚
                  â”‚  â”‚ (TensorFlow)    â”‚   â”‚
                  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                        â”‚
                  â–¼                        â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ ML Model         â”‚    â”‚ MongoDB Database â”‚
         â”‚ (Keras/TF)       â”‚    â”‚ SensorData       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  USER INTERACTION                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ 1. Select Image (Upload or Camera)   â”‚                      â”‚
â”‚  â”‚ 2. Click "Scan & Predict"            â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ PARALLEL OPERATIONS               â”‚
        â”‚  â”œâ”€ Fetch Sensor Data            â”‚
        â”‚  â”‚ â””â”€ http://localhost:5000/    â”‚
        â”‚  â”‚    api-sensor/sensor-data   â”‚
        â”‚  â””â”€ Send Image to ML             â”‚
        â”‚    â””â”€ http://localhost:5000/   â”‚
        â”‚       api/leaf/predict        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                  â”‚
        â–¼                                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ML Response  â”‚              â”‚ Sensor Response  â”‚
    â”‚              â”‚              â”‚                  â”‚
    â”‚ {            â”‚              â”‚ {                â”‚
    â”‚   "label":   â”‚              â”‚   "temperature": â”‚
    â”‚   "Blister   â”‚              â”‚   28.5,          â”‚
    â”‚   _Blight",  â”‚              â”‚   "humidity":    â”‚
    â”‚   "confidenceâ”‚              â”‚   75.2,          â”‚
    â”‚   ": 0.94    â”‚              â”‚   "soil_moisture"â”‚
    â”‚ }            â”‚              â”‚   : 55.3         â”‚
    â”‚              â”‚              â”‚ }                â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                             â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ calculateSeverity()            â”‚
         â”‚ (disease-specific logic)       â”‚
         â”‚                                â”‚
         â”‚ Input:                         â”‚
         â”‚  - diseaseLabel                â”‚
         â”‚  - sensorData                  â”‚
         â”‚                                â”‚
         â”‚ Logic:                         â”‚
         â”‚  - Check temp range            â”‚
         â”‚  - Check humidity range        â”‚
         â”‚  - Check soil moisture range   â”‚
         â”‚  - Apply disease-specific rulesâ”‚
         â”‚                                â”‚
         â”‚ Output:                        â”‚
         â”‚  - "LOW" | "MEDIUM" | "HIGH"  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ getAdvisory()                  â”‚
         â”‚                                â”‚
         â”‚ Input:                         â”‚
         â”‚  - diseaseLabel                â”‚
         â”‚  - severity                    â”‚
         â”‚                                â”‚
         â”‚ Output:                        â”‚
         â”‚ {                              â”‚
         â”‚   emoji: "ğŸ¦ ",                â”‚
         â”‚   title: "Blister Blight",     â”‚
         â”‚   severity: "ğŸŸ¡ MEDIUM",       â”‚
         â”‚   actions: [                   â”‚
         â”‚     "Apply fungicide...",      â”‚
         â”‚     "Improve airflow...",      â”‚
         â”‚     ...                        â”‚
         â”‚   ]                            â”‚
         â”‚ }                              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  RENDER RESULTS                     â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ Sensor Data Panel               â”‚ â”‚
    â”‚ â”‚ ğŸŒ¡ï¸ Temperature: 28.5Â°C          â”‚ â”‚
    â”‚ â”‚ ğŸ’§ Humidity: 75.2%              â”‚ â”‚
    â”‚ â”‚ ğŸŒ± Soil Moisture: 55.3%         â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ Prediction Card                 â”‚ â”‚
    â”‚ â”‚ Blister Blight (94.32%)         â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ Severity Badge                  â”‚ â”‚
    â”‚ â”‚ ğŸŸ¡ MEDIUM (Spreading)          â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ Advisory Card                   â”‚ â”‚
    â”‚ â”‚ ğŸ¦  Blister Blight               â”‚ â”‚
    â”‚ â”‚ âœ” Apply fungicide               â”‚ â”‚
    â”‚ â”‚ âœ” Improve airflow by pruning    â”‚ â”‚
    â”‚ â”‚ âœ” Reduce shade and leaf wetness â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component State Management

```
LeafDisease Component State Tree:

{
  mode: "upload" | "camera",
  imageFile: File | null,
  imagePreview: string (blob URL) | null,
  scanning: boolean,
  loading: boolean,
  result: {
    label: string,           // Disease name
    confidence: number       // 0-1
  } | null,
  error: string | null,
  sensorData: {
    temperature: number,     // Â°C
    humidity: number,        // %
    soil_moisture: number,   // %
    timestamp: ISO string
  } | null,
  severity: "LOW" | "MEDIUM" | "HIGH" | null,
  advisory: {
    emoji: string,
    title: string,
    severity: string,        // "ğŸŸ¢ LOW" etc.
    actions: string[]
  } | null
}
```

## Severity Calculation Logic Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ calculateSeverity(diseaseLabel, sensorData)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                        â”‚
                â–¼                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ null sensorData  â”‚   â”‚ Valid sensorData   â”‚
        â”‚ â†’ MEDIUM         â”‚   â”‚ â†’ Check disease    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚               â”‚               â”‚
                        â–¼               â–¼               â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Healthy     â”‚ â”‚ Fungal   â”‚ â”‚ Pest         â”‚
                 â”‚ _leaves     â”‚ â”‚ Disease  â”‚ â”‚ (Mite)       â”‚
                 â”‚             â”‚ â”‚          â”‚ â”‚              â”‚
                 â”‚ Compare to: â”‚ â”‚ Compare: â”‚ â”‚ Compare:     â”‚
                 â”‚ - Optimal   â”‚ â”‚ - Temp   â”‚ â”‚ - Hot + Dry  â”‚
                 â”‚   ranges    â”‚ â”‚ - Humidity
                 â”‚ - Count     â”‚ â”‚ - Moisture
                 â”‚   deviationsâ”‚ â”‚ (high/wet)
                 â”‚             â”‚ â”‚          â”‚ â”‚ Inverse of   â”‚
                 â”‚ 0 = LOW     â”‚ â”‚ Ideal =  â”‚ â”‚ fungal       â”‚
                 â”‚ 1 = MEDIUM  â”‚ â”‚ LOW      â”‚ â”‚ Mite thrives â”‚
                 â”‚ 2+ = HIGH   â”‚ â”‚ Bad = HIGH
                 â”‚             â”‚ â”‚          â”‚ â”‚ HIGH = Risk  â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚               â”‚               â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Return Severity Level    â”‚
                        â”‚ "LOW" | "MEDIUM" | "HIGH"â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Disease-Specific Threshold Visualization

### Blister Blight (Cool, Humid Environment)

```
TEMPERATURE RANGE: 15Â°C â—€â”â”â”â”â” 18-25Â°C (IDEAL) â”â”â”â”â”â–¶ 30Â°C

         LOW          MEDIUM        HIGH
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 70-80%  â”‚â”€â”€â”€â”‚ 80-85%   â”‚â”€â”€â”€â”‚ >85%   â”‚
    â”‚Humidity â”‚   â”‚Humidity  â”‚   â”‚Humidityâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²              â–²              â–²
       â”‚              â”‚              â”‚
     70-80Â°C Cool  Moderate Temp   18-25Â°C
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     BLISTER BLIGHT RISK MATRIX       â”‚
    â”‚                                      â”‚
    â”‚  LOW:      Humidity 70-80%           â”‚
    â”‚            Temp: 18-25Â°C             â”‚
    â”‚            Moisture: Balanced        â”‚
    â”‚                                      â”‚
    â”‚  MEDIUM:   Humidity 80-85%           â”‚
    â”‚            Temp: 18-25Â°C             â”‚
    â”‚                                      â”‚
    â”‚  HIGH:     Humidity >85%             â”‚
    â”‚            Temp: 18-25Â°C             â”‚
    â”‚            Moisture: >70%            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Red Spider Mite (Hot, Dry Environment)

```
TEMPERATURE RANGE: 15Â°C â—€â”â”â”â” 30Â°C (THRESHOLD) â”â”â”â”â–¶ 40Â°C

         LOW          MEDIUM        HIGH
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ >60%    â”‚â”€â”€â”€â”‚ 50-60%   â”‚â”€â”€â”€â”‚ <45%   â”‚
    â”‚Humidity â”‚   â”‚Humidity  â”‚   â”‚Humidityâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²              â–²              â–²
       â”‚              â”‚              â”‚
    <30Â°C Cool     30Â°C Hot      >32Â°C Very Hot
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     RED SPIDER MITE RISK MATRIX      â”‚
    â”‚                                      â”‚
    â”‚  LOW:      Temp: <30Â°C               â”‚
    â”‚            Humidity: >60%            â”‚
    â”‚            Moisture: Adequate        â”‚
    â”‚                                      â”‚
    â”‚  MEDIUM:   Temp: >30Â°C               â”‚
    â”‚            OR Humidity: <50%         â”‚
    â”‚            OR Moisture: <30%         â”‚
    â”‚                                      â”‚
    â”‚  HIGH:     Temp: >32Â°C               â”‚
    â”‚            AND Humidity: <45%        â”‚
    â”‚            AND Moisture: <25%        â”‚
    â”‚            = PERFECT MITE EXPLOSION  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## UI Component Hierarchy

```
LeafDisease (Main Component)
â”œâ”€â”€ Header
â”‚   â”œâ”€â”€ Title
â”‚   â””â”€â”€ Subtitle
â”‚
â”œâ”€â”€ Sensor Data Panel (NEW)
â”‚   â””â”€â”€ Sensor Grid
â”‚       â”œâ”€â”€ Temperature Item
â”‚       â”œâ”€â”€ Humidity Item
â”‚       â””â”€â”€ Soil Moisture Item
â”‚
â””â”€â”€ Leaf Disease Card
    â”œâ”€â”€ Mode Options
    â”‚   â”œâ”€â”€ Use Camera Button
    â”‚   â””â”€â”€ Upload Image Button
    â”‚
    â”œâ”€â”€ Content
    â”‚   â”œâ”€â”€ Preview Panel
    â”‚   â”‚   â”œâ”€â”€ Video (camera mode)
    â”‚   â”‚   â”œâ”€â”€ Image Preview
    â”‚   â”‚   â””â”€â”€ Scan Overlay
    â”‚   â”‚
    â”‚   â””â”€â”€ Controls Panel
    â”‚       â”œâ”€â”€ File Input / Capture Button
    â”‚       â”œâ”€â”€ Scan Button
    â”‚       â”œâ”€â”€ Reset Button
    â”‚       â”œâ”€â”€ Error Message (if error)
    â”‚       â”œâ”€â”€ Prediction Card (if result)
    â”‚       â”‚   â”œâ”€â”€ Disease Name
    â”‚       â”‚   â””â”€â”€ Confidence Score
    â”‚       â”œâ”€â”€ Severity Card (NEW, if severity)
    â”‚       â”‚   â””â”€â”€ Severity Badge
    â”‚       â””â”€â”€ Advisory Card (NEW, if advisory)
    â”‚           â”œâ”€â”€ Advisory Header
    â”‚           â”‚   â”œâ”€â”€ Emoji
    â”‚           â”‚   â””â”€â”€ Title
    â”‚           â””â”€â”€ Advisory Actions List
    â”‚
    â””â”€â”€ Canvas (hidden)
```

## Request/Response Flow

### 1. Sensor Data Request

```
REQUEST:
GET /api-sensor/sensor-data
Host: localhost:5000

RESPONSE (200):
{
  "_id": "65a1b2c3d4e5f6g7h8i9j0k1",
  "temperature": 28.5,
  "humidity": 75.2,
  "soil_moisture": 55.3,
  "timestamp": "2025-02-03T14:30:45.123Z"
}
```

### 2. Prediction Request

```
REQUEST:
POST /api/leaf/predict
Host: localhost:5000
Content-Type: multipart/form-data

BODY:
{
  "image": <binary file data>
}

RESPONSE (200):
{
  "label": "Blister_Blight",
  "confidence": 0.9432
}

OR RESPONSE (400):
{
  "error": "invalid_image",
  "message": "Please enter a valid tea leaf image"
}
```

---

**Key Innovation**: Severity and Advisory calculation happens entirely on the frontend using pure JavaScript functions. No backend changes required! This makes the system:

- âš¡ Fast (no additional API calls)
- ğŸ”§ Easy to customize (modify logic locally)
- ğŸ”„ Responsive (instant calculation)
